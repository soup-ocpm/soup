<div class="master">
  <!--Graph visualization-->
  <div
    class="master-graph"
    [ngClass]="{ small: this.isOpenMenuSidebar, 'small-two': this.isOpenSearchSidebar }">
    <div id="myGraphContainer">
      <svg #graphSvg></svg>
    </div>
  </div>

  <!--Right Action buttons-->
  <div class="right-actions">
    <i
      matTooltip="Menu"
      class="bi bi-card-list"
      style="margin-right: 7px"
      (click)="this.handleMenuOperations()"></i>
    <i
      matTooltip="Search"
      class="bi bi-search"
      style="margin-top: 10px; margin-right: 7px"
      (click)="this.handleSearchData()"></i>
  </div>

  <!--Left Action buttons-->
  <div
    class="left-actions"
    *ngIf="!this.isOpenMenuSidebar && !this.isOpenSearchSidebar">
    <i
      matTooltip="Leave"
      class="bi bi-arrow-left-square"
      (click)="this.leavePage()"></i>
  </div>

  <!--Menu Sidebar-->
  <div
    class="sidebar"
    [ngClass]="{ show: this.isOpenMenuSidebar }">
    <div class="sidebar-header">
      <h4>Manage Dataset</h4>
      <i
        class="bi bi-x-lg"
        (click)="this.isOpenMenuSidebar = false"></i>
    </div>
  </div>

  <!--Search Sidebar-->
  <div
    class="sidebar"
    [ngClass]="{ show: this.isOpenSearchSidebar }"
    [ngStyle]="{ width: '600px' }">
    <div class="sidebar-header">
      <h4>Search Data</h4>
      <i
        class="bi bi-x-lg"
        (click)="this.closeSearchSidebar()"></i>
    </div>
    <p>Search node or links inside your graph</p>

    <!--Input-->
    <div class="search-dataset">
      <input
        class="form-control form-control-sm"
        style="margin-top: 10px"
        type="text"
        placeholder="Receive Order..."
        [(ngModel)]="searchTerm"
        (input)="this.searchData()" />
    </div>

    <div style="height: 20px"></div>
    <app-s-divider></app-s-divider>

    <!--Tabber-->
    <mat-tab-group
      #tabber
      (selectedTabChange)="this.onTabChange($event)">
      <!--Node tab-->
      <mat-tab
        label="Nodes"
        class="tabber">
        <div
          class="master-search"
          (scroll)="onScrollNodes()"
          style="margin-top: 15px"
          #scrollNodeContainer>
          <div
            class="search-term"
            *ngFor="let item of displayedNodes"
            (click)="selectNodeSearched(item)">
            <div class="item-details">
              <h5>{{ item['ActivityName'] }}</h5>
              <p>
                <strong>Event ID:</strong>
                {{ item['EventID'] }}
              </p>
              <p>
                <strong>Type:</strong>
                {{ item['Type'] }}
              </p>
            </div>
            <div class="icon-section">
              <i class="bi bi-arrow-right-circle"></i>
            </div>
          </div>

          <!-- Loading -->
          <div
            class="loading-indicator"
            *ngIf="isLoading">
            <p>Loading more data...</p>
          </div>
        </div>
      </mat-tab>

      <!--Edges tab-->
      <mat-tab
        label="Links"
        class="tabber">
        <div
          class="master-search"
          (scroll)="onScrollEdges()"
          style="margin-top: 15px"
          #scrollEdgesContainer>
          <div
            class="search-term"
            *ngFor="let item of displayedEdges"
            (click)="selecEdgeSearched(item)">
            <div class="item-details">
              <h5>{{ item['label'] }}</h5>
              <p>
                <strong>From node:</strong>
                {{ item.source.id }}
              </p>
              <p>
                <strong>To node:</strong>
                {{ item.target.id }}
              </p>
            </div>
            <div class="icon-section">
              <i class="bi bi-arrow-right-circle"></i>
            </div>
          </div>

          <!-- Loading-->
          <div
            class="loading-indicator"
            *ngIf="isLoading">
            <p>Loading more data...</p>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>
